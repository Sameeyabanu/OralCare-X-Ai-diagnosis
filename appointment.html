<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Book your dental appointment with ORAL CARE AI - Expert dental specialists available for all your oral health needs.">
    <title>Book Appointment - ORAL CARE-X-AI</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', var(--font-main);
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 25%, #0066cc 50%, #00a8e8 75%, #1e3c72 100%) !important;
            background-attachment: fixed;
            min-height: 100vh;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <a href="index.html" class="logo">
            <span class="logo-icon">ü¶∑</span>
            <span>ORAL CARE-X-AI</span>
        </a>
        <ul class="nav-links">
            <li><a href="index.html" data-lang="nav_home">Home</a></li>
            <li><a href="about.html" data-lang="nav_about">About</a></li>
            <li><a href="diseases.html" data-lang="nav_diseases">Diseases</a></li>
            <li><a href="appointment.html" class="active" data-lang="nav_appointment">Book Appointment</a></li>
            <li><a href="contact.html" data-lang="nav_contact">Contact</a></li>
        </ul>
        <div class="nav-actions">
            <select id="language-selector" class="lang-selector" onchange="Translations.set(this.value)">
                <option value="en">üá∫üá∏ English</option>
                <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="ml">üå¥ ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
                <option value="mr">üü† ‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                <option value="ta">üåª ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                <option value="kn">üü° ‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
            </select>
            <a href="index.html#login-section" class="nav-btn" data-lang="nav_login">Login</a>
        </div>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <h1 data-lang="apt_title">Book Your Appointment</h1>
        <p data-lang="apt_subtitle">Schedule a visit with our expert dental specialists</p>
    </section>

    <!-- Appointment Section -->
    <section class="appointment-section">
        <div class="appointment-container">
            <!-- Doctor Selection -->
            <div class="appointment-step" id="step-doctor">
                <div class="step-header">
                    <span class="step-number">1</span>
                    <h2 data-lang="apt_select_doctor">Select Doctor</h2>
                </div>

                <!-- Specialty Filter -->
                <div class="filter-bar">
                    <select id="specialty-filter" class="specialty-filter" onchange="filterDoctors(this.value)">
                        <option value="all" data-lang="filter_all">All Specialties</option>
                        <option value="General Dentistry">General Dentistry</option>
                        <option value="Orthodontics">Orthodontics</option>
                        <option value="Oral Surgery">Oral Surgery</option>
                        <option value="Pediatric Dentistry">Pediatric Dentistry</option>
                        <option value="Prosthodontics">Prosthodontics</option>
                        <option value="Endodontics">Endodontics</option>
                    </select>
                </div>

                <div class="doctors-grid" id="doctors-grid">
                    <!-- Doctors will be populated by JavaScript -->
                </div>
            </div>

            <!-- Date & Time Selection -->
            <div class="appointment-step" id="step-datetime">
                <div class="step-header">
                    <span class="step-number">2</span>
                    <h2 data-lang="apt_select_date">Select Date & Time</h2>
                </div>

                <div class="datetime-container">
                    <div class="date-selection">
                        <h3 data-lang="apt_select_date">Select Date</h3>
                        <div class="dates-grid" id="dates-grid">
                            <!-- Dates will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="time-selection">
                        <h3 data-lang="apt_select_time">Select Time Slot</h3>
                        <div class="times-grid" id="times-grid">
                            <!-- Times will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Patient Details Form -->
            <div class="appointment-step" id="step-details">
                <div class="step-header">
                    <span class="step-number">3</span>
                    <h2 data-lang="apt_your_details">Your Details</h2>
                </div>

                <form id="appointment-form" class="appointment-form" onsubmit="return submitAppointment(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="patient-name" data-lang="apt_patient_name">Full Name</label>
                            <input type="text" id="patient-name" placeholder="Enter your full name" required>
                        </div>
                        <div class="form-group">
                            <label for="patient-phone" data-lang="apt_phone">Phone Number</label>
                            <input type="tel" id="patient-phone" placeholder="10-digit phone number" pattern="[0-9]{10}"
                                required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="patient-email" data-lang="apt_email">Email Address</label>
                            <input type="email" id="patient-email" placeholder="your@email.com" required>
                        </div>
                        <div class="form-group">
                            <label for="appointment-type" data-lang="apt_type">Appointment Type</label>
                            <select id="appointment-type" required>
                                <option value="">Select type...</option>
                                <option value="checkup" data-lang="type_checkup">Regular Checkup</option>
                                <option value="cleaning" data-lang="type_cleaning">Teeth Cleaning</option>
                                <option value="treatment" data-lang="type_treatment">Treatment</option>
                                <option value="consultation" data-lang="type_consultation">Consultation</option>
                                <option value="emergency" data-lang="type_emergency">Emergency</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="appointment-notes" data-lang="apt_notes">Additional Notes (Optional)</label>
                        <textarea id="appointment-notes" rows="3"
                            placeholder="Any specific concerns or requirements..."></textarea>
                    </div>

                    <!-- Summary -->
                    <div class="appointment-summary" id="appointment-summary">
                        <h3>Appointment Summary</h3>
                        <div class="summary-content">
                            <div class="summary-item">
                                <span class="summary-label">Doctor:</span>
                                <span class="summary-value" id="summary-doctor">Not selected</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Date:</span>
                                <span class="summary-value" id="summary-date">Not selected</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Time:</span>
                                <span class="summary-value" id="summary-time">Not selected</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label" data-lang="apt_fee">Consultation Fee:</span>
                                <span class="summary-value" id="summary-fee">-</span>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn" id="submit-btn" disabled>
                        <span data-lang="apt_submit">Confirm Appointment</span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmation-modal">
        <div class="modal-content">
            <div class="modal-icon">‚úÖ</div>
            <h2 data-lang="confirm_title">Appointment Confirmed!</h2>
            <p data-lang="confirm_message">Your appointment has been successfully booked.</p>

            <div class="confirmation-details">
                <div class="detail-item">
                    <span class="detail-label" data-lang="confirm_id">Appointment ID:</span>
                    <span class="detail-value" id="confirm-apt-id">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label" data-lang="confirm_doctor">Doctor:</span>
                    <span class="detail-value" id="confirm-doctor">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label" data-lang="confirm_datetime">Date & Time:</span>
                    <span class="detail-value" id="confirm-datetime">-</span>
                </div>
            </div>

            <button class="btn-primary" onclick="closeModal()" data-lang="confirm_done">Done</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <a href="index.html" class="logo">
                    <span class="logo-icon">ü¶∑</span>
                    <span>ORAL CARE-X-AI</span>
                </a>
                <p data-lang="footer_desc">Advanced AI-powered dental diagnostics for everyone. Making dental health
                    accessible and affordable.</p>
            </div>
            <div class="footer-links">
                <h4 data-lang="footer_quick_links">Quick Links</h4>
                <ul>
                    <li><a href="index.html" data-lang="nav_home">Home</a></li>
                    <li><a href="about.html" data-lang="nav_about">About Us</a></li>
                    <li><a href="diseases.html" data-lang="nav_diseases">Diseases</a></li>
                    <li><a href="contact.html" data-lang="nav_contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4 data-lang="footer_services">Services</h4>
                <ul>
                    <li><a href="#" data-lang="footer_ai_diagnosis">AI Diagnosis</a></li>
                    <li><a href="#" data-lang="footer_chatbot">Dental Chatbot</a></li>
                    <li><a href="#" data-lang="footer_reports">Health Reports</a></li>
                    <li><a href="appointment.html" data-lang="nav_appointment">Book Appointment</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4 data-lang="footer_legal">Legal</h4>
                <ul>
                    <li><a href="#" data-lang="footer_privacy">Privacy Policy</a></li>
                    <li><a href="#" data-lang="footer_terms">Terms of Service</a></li>
                    <li><a href="#" data-lang="footer_cookies">Cookie Policy</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p data-lang="footer_copyright">¬© 2026 ORAL CARE X-AI-Enhances Diagnostics using CNN algorithm. All rights
                reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="doctors.js"></script>
    <script src="translations.js"></script>
    <script src="script.js"></script>
    <script>
        // ===============================================
        // APPOINTMENT PAGE FUNCTIONALITY
        // ===============================================

        let selectedDoctor = null;
        let selectedDate = null;
        let selectedTime = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            renderDoctors();
            initLanguageSelector();
        });

        // Initialize language selector
        function initLanguageSelector() {
            const selector = document.getElementById('language-selector');
            const currentLang = localStorage.getItem('oralcare_language') || 'en';
            if (selector) {
                selector.value = currentLang;
            }
        }

        // Render doctors grid
        function renderDoctors(specialty = 'all') {
            const grid = document.getElementById('doctors-grid');
            const doctors = specialty === 'all' ?
                DoctorDB.getAllDoctors() :
                DoctorDB.getDoctorsBySpecialty(specialty);
            const currentLang = Translations.current();

            grid.innerHTML = doctors.map(doctor => `
                <div class="doctor-card ${selectedDoctor === doctor.id ? 'selected' : ''}" 
                     onclick="selectDoctor(${doctor.id})">
                    <div class="doctor-avatar">${doctor.image}</div>
                    <div class="doctor-info">
                        <h3>${currentLang === 'hi' ? doctor.nameHi : doctor.name}</h3>
                        <p class="doctor-specialty">${currentLang === 'hi' ? doctor.specialtyHi : doctor.specialty}</p>
                        <p class="doctor-experience">${doctor.experience} ${Translations.get('doctor_years_exp')}</p>
                        <div class="doctor-rating">
                            <span class="stars">‚≠ê ${doctor.rating}</span>
                            <span class="reviews">(${doctor.reviews} ${Translations.get('doctor_reviews')})</span>
                        </div>
                        <p class="doctor-fee">‚Çπ${doctor.consultationFee}</p>
                    </div>
                    <div class="doctor-select-indicator">
                        ${selectedDoctor === doctor.id ? '‚úì' : ''}
                    </div>
                </div>
            `).join('');
        }

        // Filter doctors by specialty
        function filterDoctors(specialty) {
            renderDoctors(specialty);
        }

        // Select a doctor
        function selectDoctor(doctorId) {
            selectedDoctor = doctorId;
            selectedDate = null;
            selectedTime = null;

            renderDoctors(document.getElementById('specialty-filter').value);
            renderDates();
            updateSummary();
            updateSubmitButton();

            // Scroll to date selection
            document.getElementById('step-datetime').scrollIntoView({ behavior: 'smooth' });
        }

        // Render available dates
        function renderDates() {
            const grid = document.getElementById('dates-grid');

            if (!selectedDoctor) {
                grid.innerHTML = '<p class="select-prompt">Please select a doctor first</p>';
                return;
            }

            const dates = DoctorDB.getAvailableDates(selectedDoctor);

            grid.innerHTML = dates.map(d => `
                <div class="date-card ${selectedDate === d.date ? 'selected' : ''}" 
                     onclick="selectDate('${d.date}')">
                    <span class="date-day">${d.display.split(',')[0]}</span>
                    <span class="date-num">${d.display.split(' ')[1]} ${d.display.split(' ')[2]}</span>
                </div>
            `).join('');
        }

        // Select a date
        function selectDate(date) {
            selectedDate = date;
            selectedTime = null;

            renderDates();
            renderTimeSlots();
            updateSummary();
            updateSubmitButton();
        }

        // Render time slots
        function renderTimeSlots() {
            const grid = document.getElementById('times-grid');

            if (!selectedDoctor || !selectedDate) {
                grid.innerHTML = '<p class="select-prompt">Please select a date first</p>';
                return;
            }

            const slots = DoctorDB.getAvailableSlots(selectedDoctor, selectedDate);

            if (slots.length === 0) {
                grid.innerHTML = '<p class="no-slots">No available slots for this date</p>';
                return;
            }

            grid.innerHTML = slots.map(time => `
                <div class="time-card ${selectedTime === time ? 'selected' : ''}" 
                     onclick="selectTime('${time}')">
                    ${DoctorDB.formatTime(time)}
                </div>
            `).join('');
        }

        // Select a time
        function selectTime(time) {
            selectedTime = time;

            renderTimeSlots();
            updateSummary();
            updateSubmitButton();

            // Scroll to form
            document.getElementById('step-details').scrollIntoView({ behavior: 'smooth' });
        }

        // Update appointment summary
        function updateSummary() {
            const currentLang = Translations.current();

            if (selectedDoctor) {
                const doctor = DoctorDB.getDoctorById(selectedDoctor);
                document.getElementById('summary-doctor').textContent =
                    currentLang === 'hi' ? doctor.nameHi : doctor.name;
                document.getElementById('summary-fee').textContent = `‚Çπ${doctor.consultationFee}`;
            }

            if (selectedDate) {
                document.getElementById('summary-date').textContent = DoctorDB.formatDate(selectedDate);
            }

            if (selectedTime) {
                document.getElementById('summary-time').textContent = DoctorDB.formatTime(selectedTime);
            }
        }

        // Update submit button state
        function updateSubmitButton() {
            const btn = document.getElementById('submit-btn');
            btn.disabled = !(selectedDoctor && selectedDate && selectedTime);
        }

        // Submit appointment
        function submitAppointment(event) {
            event.preventDefault();

            const patientName = document.getElementById('patient-name').value;
            const phone = document.getElementById('patient-phone').value;
            const email = document.getElementById('patient-email').value;
            const appointmentType = document.getElementById('appointment-type').value;
            const notes = document.getElementById('appointment-notes').value;

            // Validate
            const errors = DoctorDB.validateAppointmentData({
                patientName,
                phone,
                email,
                doctorId: selectedDoctor,
                date: selectedDate,
                time: selectedTime,
                appointmentType
            });

            if (errors.length > 0) {
                alert(errors.join('\n'));
                return false;
            }

            // Book appointment
            const appointment = DoctorDB.bookAppointment({
                patientName,
                phone,
                email,
                doctorId: selectedDoctor,
                doctorName: DoctorDB.getDoctorById(selectedDoctor).name,
                date: selectedDate,
                time: selectedTime,
                appointmentType,
                notes
            });

            // Show confirmation
            showConfirmation(appointment);

            return false;
        }

        // Show confirmation modal
        function showConfirmation(appointment) {
            const doctor = DoctorDB.getDoctorById(appointment.doctorId);
            const currentLang = Translations.current();

            document.getElementById('confirm-apt-id').textContent = appointment.id;
            document.getElementById('confirm-doctor').textContent =
                currentLang === 'hi' ? doctor.nameHi : doctor.name;
            document.getElementById('confirm-datetime').textContent =
                `${DoctorDB.formatDate(appointment.date)} at ${DoctorDB.formatTime(appointment.time)}`;

            document.getElementById('confirmation-modal').classList.add('show');
        }

        // Close modal
        function closeModal() {
            document.getElementById('confirmation-modal').classList.remove('show');

            // Reset form
            document.getElementById('appointment-form').reset();
            selectedDoctor = null;
            selectedDate = null;
            selectedTime = null;

            renderDoctors();
            document.getElementById('dates-grid').innerHTML = '<p class="select-prompt">Please select a doctor first</p>';
            document.getElementById('times-grid').innerHTML = '<p class="select-prompt">Please select a date first</p>';

            document.getElementById('summary-doctor').textContent = 'Not selected';
            document.getElementById('summary-date').textContent = 'Not selected';
            document.getElementById('summary-time').textContent = 'Not selected';
            document.getElementById('summary-fee').textContent = '-';

            updateSubmitButton();

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>

</html>